# 实现计划: 线性日历功能完善

## 概述

将LinearLifeCalendar的年视图完善为真正的线性日历，确保显示当年度所有日期，并在左右两侧添加月份标签。实现将专注于日期计算准确性、布局优化和视觉一致性。

## 任务

- [x] 1. 优化日期计算和布局逻辑
  - 修改YearView.swift中的日期计算逻辑，确保显示全年所有日期
  - 调整columnsCount为42（6周×7天）以确保完整显示
  - 优化monthRow函数的日期位置计算
  - _需求: 1.1, 1.2, 1.4_

- [x] 1.1 为日期计算编写属性测试
  - **属性 1: 完整线性日历显示**
  - **验证: 需求 1.1, 1.2, 1.4**

- [x] 2. 完善月份边界对齐逻辑
  - 改进月份开始日期的星期几对齐计算
  - 确保月份结束日期正确处理
  - 优化空白单元格的显示逻辑
  - _需求: 1.3_

- [x] 2.1 为月份边界对齐编写属性测试
  - **属性 2: 线性月份边界对齐**
  - **验证: 需求 1.3**

- [x] 3. 优化月份标签显示
  - 确保左右两侧月份标签正确显示
  - 验证中文月份名称的正确性
  - 优化月份标签的垂直对齐
  - _需求: 2.1, 2.2, 2.3, 2.5_

- [x] 3.1 为月份标签编写属性测试
  - **属性 3: 线性月份标签完整性**
  - **验证: 需求 2.1, 2.2, 2.3**

- [x] 3.2 为月份行数量编写属性测试
  - **属性 4: 线性月份行数量**
  - **验证: 需求 2.4**

- [x] 4. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [-] 5. 优化日期单元格布局一致性
  - 确保所有日期单元格尺寸一致
  - 优化单元格间距和对齐
  - 改进周末日期的视觉区分
  - _需求: 3.1, 3.3, 4.5_

- [x] 5.1 为单元格一致性编写属性测试
  - **属性 5: 线性日期单元格一致性**
  - **验证: 需求 3.1, 4.5**

- [ ] 5.2 为周末区分编写属性测试
  - **属性 6: 线性周末日期区分**
  - **验证: 需求 3.3**

- [ ] 6. 实现今天日期高亮显示
  - 确保当前日期正确高亮显示
  - 优化今天日期的视觉效果
  - _需求: 3.4_

- [ ] 6.1 为今天日期高亮编写单元测试
  - 测试今天日期的特殊显示效果
  - _需求: 3.4_

- [ ] 7. 优化星期标题行显示
  - 确保星期标题按正确顺序显示（日到六）
  - 优化标题行的视觉样式
  - _需求: 3.2_

- [ ] 7.1 为星期标题顺序编写单元测试
  - 验证星期标题的正确顺序
  - _需求: 3.2_

- [ ] 8. 性能优化和内存管理
  - 优化LazyVStack的使用以提高滚动性能
  - 确保事件渲染的性能优化
  - 检查内存使用和潜在泄漏
  - _需求: 5.1, 5.2, 5.3, 5.5_

- [ ] 9. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

## 注意事项

- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边缘情况
- 所有任务都是必需的，确保全面实现